option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: FoodApp_by_Sage.wsgi:application
  aws:elasticbeanstalk:environment:proxy:
    ProxyServer: nginx

files:
  "/etc/nginx/conf.d/custom_nginx.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      location /static/ {
          alias /var/app/current/staticfiles/;
          access_log off;
          expires 30d;
      }
      
      location /media/ {
          alias /var/app/current/media/;
          access_log off;
          expires 30d;
      }

container_commands:
  01_makedir:
    command: "mkdir -p /var/app/current/staticfiles"
  02_collectstatic:
    command: "source /var/app/venv/*/bin/activate && python manage.py collectstatic --noinput"