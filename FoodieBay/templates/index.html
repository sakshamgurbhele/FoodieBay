<!doctype html>
{% load static %}
<html lang="en">
   <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <title>Bootstrap demo</title>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
      <link rel="stylesheet" href={% static 'style/card.css'%}>
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
      <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
   </head>
   <body>
      {% include 'navbar.html' %}
      

     {% if messages %}
        {% for message in messages %}
         <div class="alert alert-warning alert-dismissible fade show" role="alert">
           {{ message }}
           <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
         </div>
        {% endfor %}
     {% endif%}
    
      <!--carousel-->
      <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel" align="center">
         <div class="carousel-inner">
            <div class="carousel-item active">
               <img src="{% static 'image/1.webp' %}" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item" >
               <img src="{% static 'image/2.jpg' %}" class="d-block w-100" alt="...">
            </div>
            <div class="carousel-item">
               <img src="{% static 'image/3.jpg' %}" class="d-block w-100" alt="...">
            </div>
         </div>
         <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="prev">
         <span class="carousel-control-prev-icon" aria-hidden="true"></span>
         <span class="visually-hidden">Previous</span>
         </button>
         <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying" data-bs-slide="next">
         <span class="carousel-control-next-icon" aria-hidden="true"></span>
         <span class="visually-hidden">Next</span>
         </button>
      </div>
      <div class="center">
        <h2 class="m-3">Order from our Wide Range! </h2>
      </div>
      
      <!--food items -->
            
<div class="container my-5">
   <div class="row">
      {% for fooditem in fooditems %}
         <div class="col-md-3 col-sm-6 mb-4">
            <a href="{% url 'product' fooditem.id %}" style="text-decoration: none">
            <div class="card h-100 shadow-sm border-0 rounded position-relative">
               <!-- Badge Container -->
               <div class="badge-container position-relative">
                  <img src="{{ fooditem.image.url }}" class="card-img-top" alt="{{ fooditem.item_name }}">
                  {% if fooditem.non_veg %}
                     <span class="badge bg-danger position-absolute top-0 end-0 m-2">Non-Veg</span>
                  {% else %}
                     <span class="badge bg-success position-absolute top-0 end-0 m-2">Veg</span>
                  {% endif %}
               </div>

               <div class="card-body d-flex flex-column">
                  <div class="d-flex align-items-center">
                     <h5 class="card-title font-weight-bold mb-0">{{ fooditem.item_name }}</h5>
                  </div>
                  
                  <!-- Container for description and price with fixed height -->
                  <div class="description-container">
                     <p class="card-text text-muted description">{{ fooditem.description }}</p>
                     <p class="card-text text-primary font-weight-bold price">€ {{ fooditem.price }}</p>
                  </div>

                  <div class="mt-auto">
                     <!--<a class="btn btn-primary btn-block rounded-pill shadow-sm ms-auto" href="{% url 'product' fooditem.id %}">Buy Now!</a>-->
                     
                  </div>
               </div>
            </div>
            </a>
         </div>
      {% endfor %}
   </div>
</div>

<script>
// Check if the "Add to Cart" button is clicked
$(document).on('click', '#add-cart', function(e) {
    e.preventDefault();

    // Get the product ID from the clicked button's data attribute
    const productId = $(this).data('fooditem.id');

    $.ajax({
       type: 'POST',
       url: '{% url "cart_add" %}', // Ensure correct URL resolution
       data: {
            product_id: productId,
            csrfmiddlewaretoken: '{{ csrf_token }}',
            action: 'post'
       },
       success: function(response) {
            console.log("Success:", response);
            // Optionally update UI or notify the user
       },
       error: function(xhr, errmsg, err) {
            console.error("Error:", xhr.status, errmsg);
       }
    });
});
</script>






        
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
   </body>
   <!-- Remove the container if you want to extend the Footer to full width. -->

  <footer class="text-center text-lg-start">

    <!-- Copyright -->
    <div class="text-center text-black p-3" style="background-color: rgba(0, 0, 0, 0.1);">
      © 2024 Copyright:
      <a class="text-black" href="/">FoodieBay</a>
      <br><br />
      <!--Made with love by <a class="text-black" href="https://www.linkedin.com/in/sakshamgurbhele/">Saksham Gurbhele</a>-->
    </div>
    <!-- Copyright -->
  </footer>
 
<!-- End of .container -->
</html>